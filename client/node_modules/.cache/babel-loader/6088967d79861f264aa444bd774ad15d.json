{"ast":null,"code":"var _jsxFileName = \"/Users/guneet/Downloads/Fall2022/myproject/Marketplace/client/src/pages/CreateNFT/index.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport CancelOutlinedIcon from \"@material-ui/icons/CancelOutlined\";\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from \"@material-ui/core/Button\";\nimport { useStyles } from \"./styles.js\";\nimport DropZone from \"../../components/DropZone\";\nimport { api } from \"../../services/api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CreateNFT = () => {\n  _s();\n  const classes = useStyles();\n  const history = useHistory();\n  const account = useSelector(state => state.allNft.account);\n  const myTokenContract = useSelector(state => state.allNft.myTokenContract);\n  const [selectedFile, setSelectedFile] = useState();\n  const [formData, setFormData] = useState({\n    title: \"\",\n    description: \"\",\n    price: \"\"\n  });\n  function handleInputChange(event) {\n    let {\n      name,\n      value\n    } = event.target;\n    // if(name === 'image'){\n    //   value = event.target.files[0];\n    // }\n    setFormData({\n      ...formData,\n      [name]: value\n    });\n  }\n  async function createNFT(event) {\n    event.preventDefault();\n    const {\n      title,\n      description\n    } = formData;\n    console.log(\"title: \" + title);\n    const data = new FormData();\n    data.append(\"name\", title);\n    data.append(\"description\", description);\n    if (selectedFile) {\n      data.append('img', selectedFile);\n      console.log(\"slectedFile: \", selectedFile);\n    }\n    try {\n      const totalSupply = await artTokenContract.methods.totalSupply().call();\n      data.append(\"tokenId\", Number(totalSupply) + 1);\n      const response = await api.post(\"/tokens\", data, {\n        headers: {\n          \"Content-Type\": `multipart/form-data; boundary=${data._boundary}`\n        }\n      });\n      console.log(response);\n      mint(response.data.message);\n    } catch (error) {\n      console.log(error);\n      // error.response.data\n    }\n  }\n\n  async function mint(tokenMetadataURL) {\n    try {\n      const receipt = await artTokenContract.methods.mint(tokenMetadataURL).send({\n        from: account\n      });\n      console.log(receipt);\n      console.log(receipt.events.Transfer.returnValues.tokenId);\n      // setItems(items => [...items, {\n      //   tokenId: receipt.events.Transfer.returnValues.tokenId,\n      //   creator: accounts[0],\n      //   owner: accounts[0],\n      //   uri: tokenMetadataURL,\n      //   isForSale: false,\n      //   saleId: null,\n      //   price: 0,\n      //   isSold: null\n      // }]);\n      history.push('/');\n    } catch (error) {\n      console.error(\"Error, minting: \", error);\n      alert(\"Error while minting!\");\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.pageCreateNft,\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: createNFT,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.formHeader,\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Create collectible\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/\",\n          children: /*#__PURE__*/_jsxDEV(CancelOutlinedIcon, {\n            fontSize: \"large\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.content,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.dropzone,\n          children: /*#__PURE__*/_jsxDEV(DropZone, {\n            onFileUploaded: setSelectedFile\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"fieldset\", {\n          children: [/*#__PURE__*/_jsxDEV(TextField, {\n            label: \"Title\",\n            name: \"title\",\n            variant: \"filled\",\n            required: true,\n            value: formData.title,\n            onChange: handleInputChange,\n            fullWidth: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            id: \"outlined-multiline-static\",\n            multiline: true,\n            rows: 4,\n            label: \"Description\",\n            name: \"description\",\n            variant: \"filled\",\n            required: true,\n            value: formData.description,\n            onChange: handleInputChange,\n            fullWidth: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            label: \"price\",\n            name: \"price\",\n            variant: \"filled\",\n            value: formData.price,\n            onChange: handleInputChange,\n            InputProps: {\n              startAdornment: /*#__PURE__*/_jsxDEV(InputAdornment, {\n                position: \"start\",\n                children: \"ETH\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 138,\n                columnNumber: 33\n              }, this)\n            },\n            fullWidth: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"contained\",\n            color: \"primary\",\n            type: \"submit\",\n            children: \"Submit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 97,\n    columnNumber: 5\n  }, this);\n};\n_s(CreateNFT, \"nQmPK30JxLCXXo7whGu0duciOYc=\", false, function () {\n  return [useStyles, useHistory, useSelector, useSelector];\n});\n_c = CreateNFT;\nexport default CreateNFT;\nvar _c;\n$RefreshReg$(_c, \"CreateNFT\");","map":{"version":3,"names":["React","useState","useSelector","Link","useHistory","CancelOutlinedIcon","InputAdornment","TextField","Button","useStyles","DropZone","api","CreateNFT","classes","history","account","state","allNft","myTokenContract","selectedFile","setSelectedFile","formData","setFormData","title","description","price","handleInputChange","event","name","value","target","createNFT","preventDefault","console","log","data","FormData","append","totalSupply","artTokenContract","methods","call","Number","response","post","headers","_boundary","mint","message","error","tokenMetadataURL","receipt","send","from","events","Transfer","returnValues","tokenId","push","alert","pageCreateNft","formHeader","content","dropzone","startAdornment"],"sources":["/Users/guneet/Downloads/Fall2022/myproject/Marketplace/client/src/pages/CreateNFT/index.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport CancelOutlinedIcon  from \"@material-ui/icons/CancelOutlined\";\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from \"@material-ui/core/Button\";\n\nimport { useStyles } from \"./styles.js\";\n\nimport DropZone from \"../../components/DropZone\";\n\nimport { api } from \"../../services/api\";\n\nconst CreateNFT = () => {\n  const classes = useStyles();\n  const history = useHistory();\n\n  const account = useSelector((state) => state.allNft.account);\n  const myTokenContract = useSelector(\n    (state) => state.allNft.myTokenContract\n  );\n\n  const [selectedFile, setSelectedFile] = useState();\n  const [formData, setFormData] = useState({\n    title: \"\",\n    description: \"\",\n    price: \"\",\n  });\n\n  function handleInputChange(event) {\n    let { name, value } = event.target;\n    // if(name === 'image'){\n    //   value = event.target.files[0];\n    // }\n    setFormData({ ...formData, [name]: value });\n  }\n\n  async function createNFT(event) {\n    event.preventDefault();\n    const { title, description } = formData;\n\n    console.log(\"title: \" + title);\n\n    const data = new FormData();\n    data.append(\"name\", title);\n    data.append(\"description\", description);\n\n    if(selectedFile){\n      data.append('img', selectedFile);\n      console.log(\"slectedFile: \", selectedFile);\n    }\n\n    try {\n      const totalSupply = await artTokenContract.methods.totalSupply().call();\n      data.append(\"tokenId\", Number(totalSupply) + 1);\n\n      const response = await api.post(\"/tokens\", data, {\n        headers: {\n          \"Content-Type\": `multipart/form-data; boundary=${data._boundary}`,\n        },\n      });\n      console.log(response);\n\n      mint(response.data.message);\n    } catch (error) {\n      console.log(error);\n      // error.response.data\n    }\n  }\n\n  async function mint(tokenMetadataURL) {\n    try {\n      const receipt = await artTokenContract.methods\n        .mint(tokenMetadataURL)\n        .send({ from: account });\n      console.log(receipt);\n      console.log(receipt.events.Transfer.returnValues.tokenId);\n      // setItems(items => [...items, {\n      //   tokenId: receipt.events.Transfer.returnValues.tokenId,\n      //   creator: accounts[0],\n      //   owner: accounts[0],\n      //   uri: tokenMetadataURL,\n      //   isForSale: false,\n      //   saleId: null,\n      //   price: 0,\n      //   isSold: null\n      // }]);\n      history.push('/');\n    } catch (error) {\n      console.error(\"Error, minting: \", error);\n      alert(\"Error while minting!\");\n    }\n  }\n\n  return (\n    <div className={classes.pageCreateNft}>\n      <form onSubmit={createNFT}>\n        <div className={classes.formHeader}>\n          <h1>Create collectible</h1>\n          <Link to=\"/\">\n            <CancelOutlinedIcon fontSize=\"large\" />\n          </Link>\n        </div>\n        <div className={classes.content}>\n          <div className={classes.dropzone}>\n            <DropZone onFileUploaded={setSelectedFile} />\n          </div>\n          <fieldset>\n            <TextField\n              label=\"Title\"\n              name=\"title\"\n              variant=\"filled\"\n              required\n              value={formData.title}\n              onChange={handleInputChange}\n              fullWidth\n            />\n            <TextField\n              id=\"outlined-multiline-static\"\n              multiline\n              rows={4}\n              label=\"Description\"\n              name=\"description\"\n              variant=\"filled\"\n              required\n              value={formData.description}\n              onChange={handleInputChange}\n              fullWidth\n            />\n            <TextField\n              label=\"price\"\n              name=\"price\"\n              variant=\"filled\"\n              value={formData.price}\n              onChange={handleInputChange}\n              InputProps={{\n                startAdornment: <InputAdornment position=\"start\">ETH</InputAdornment>,\n              }}\n              fullWidth\n            />\n\n            <Button variant=\"contained\" color=\"primary\" type=\"submit\">\n              Submit\n            </Button>\n          </fieldset>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default CreateNFT;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}